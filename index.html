<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rheemah Hospital | Tassia Medical Excellence</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { 
            font-family: "Times New Roman", Times, serif; 
            scroll-behavior: smooth; 
            background: linear-gradient(135deg, #050505, #1e1b4b, #050505); 
            color: #ffffff; 
            min-height: 100vh;
            margin: 0;
            overflow-x: hidden;
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
        }

        .gold-accent { color: #D4AF37; }
        .medical-blue { color: #38bdf8; }
        .section-tag { font-size: 10px; text-transform: uppercase; letter-spacing: 0.2em; color: rgba(56, 189, 248, 0.7); margin-bottom: 8px; display: block; }
        
        .nav-glass {
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(56, 189, 248, 0.2);
        }

        input, textarea {
            background: rgba(255, 255, 255, 0.05) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            color: white !important;
            border-radius: 8px;
            padding: 12px;
            width: 100%;
            outline: none;
        }

        .star-rating {
            display: flex;
            flex-direction: row-reverse;
            justify-content: flex-end;
            gap: 4px;
        }
        .star-rating input { display: none; }
        .star-rating label { font-size: 28px; color: rgba(255, 255, 255, 0.2); cursor: pointer; }
        .star-rating input:checked ~ label, .star-rating label:hover, .star-rating label:hover ~ label { color: #D4AF37; }

        .whatsapp-float {
            position: fixed; bottom: 20px; right: 20px;
            background: #25d366; color: white;
            padding: 12px 20px; border-radius: 50px;
            z-index: 1000; font-weight: bold;
            font-size: 11px; text-transform: uppercase;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            text-decoration: none;
        }

        .hidden { display: none; }
    </style>
</head>
<body class="flex flex-col">

    <a href="https://wa.me/254721800701" target="_blank" class="whatsapp-float">24/7 Medical Help</a>

    <nav class="nav-glass p-4 md:p-6 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="text-center md:text-left">
                <h1 class="text-2xl md:text-4xl font-bold uppercase tracking-tighter">RHEEMAH <span class="medical-blue">HOSPITAL</span></h1>
                <p class="text-[8px] tracking-[0.3em] uppercase font-bold text-zinc-400">Fedha Rd • Tassia • Nairobi</p>
            </div>
            
            <div class="w-full max-w-lg flex glass overflow-hidden border border-white/10">
                <input type="text" id="mainSearch" placeholder="Search: Surgery, Maternity, Dental, Pharmacy..." class="bg-transparent border-none text-xs px-4 py-2">
                <button onclick="searchPage()" class="bg-sky-700 text-white px-5 py-2 font-bold uppercase text-[9px] tracking-widest">Search</button>
            </div>

            <div class="flex gap-6 md:gap-8 text-[10px] font-bold uppercase tracking-widest">
                <a href="#" onclick="showPage('main')" class="hover:text-sky-400">Home</a>
                <a href="#" onclick="showPage('reviews')" class="hover:text-sky-400">Reviews</a>
                <a href="#" onclick="showPage('portal')" class="hover:text-sky-400">Portal</a>
            </div>
        </div>
    </nav>

    <div id="page-main">
        <section class="max-w-6xl mx-auto py-12 md:py-20 px-6">
            <span class="section-tag text-center md:text-left">Welcome to Rheemah</span>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div class="glass p-8 md:p-12 border-t-4 border-sky-500">
                    <h2 id="heading-emergency" class="text-4xl md:text-6xl font-bold italic mb-6 leading-tight">Advanced <br><span class="medical-blue underline">Healthcare.</span></h2>
                    <p class="text-sm md:text-lg text-zinc-300 font-light mb-6">Open 24 hours for Tassia and Fedha residents. Experience prompt diagnosis and personalized care.</p>
                    <p class="text-xl font-bold gold-accent">Hotline: 0721 800701</p>
                </div>
                <div class="glass p-8 md:p-10 border-l-4 border-sky-500">
                    <h3 id="heading-accessibility" class="font-bold uppercase text-xs gold-accent tracking-widest mb-6">Accessibility & Facilities</h3>
                    <ul class="space-y-3 text-xs md:text-sm font-light">
                        <li> Wheelchair-accessible car park</li>
                        <li> Wheelchair-accessible entrance</li>
                        <li> In-patient & Out-patient units</li>
                        <li> 24-Hour Emergency Response</li>
                    </ul>
                </div>
            </div>
        </section>

        <section class="max-w-6xl mx-auto py-12 px-6">
            <span class="section-tag">Medical Departments</span>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="glass p-8 hover:border-sky-500 transition">
                    <h3 id="heading-maternity" class="text-2xl font-bold italic mb-4 medical-blue">Maternity Wing</h3>
                    <p class="text-xs text-zinc-400 leading-relaxed">Dedicated prenatal, delivery, and postnatal care. Safe and comfortable environment for mothers and infants.</p>
                </div>
                <div class="glass p-8 hover:border-sky-500 transition">
                    <h3 id="heading-surgery" class="text-2xl font-bold italic mb-4 medical-blue">Surgical Center</h3>
                    <p class="text-xs text-zinc-400 leading-relaxed">Minor and major surgical procedures performed by expert surgeons in our modern theater.</p>
                </div>
                <div class="glass p-8 hover:border-sky-500 transition">
                    <h3 id="heading-dental" class="text-2xl font-bold italic mb-4 medical-blue">Dental Clinic</h3>
                    <p class="text-xs text-zinc-400 leading-relaxed">Comprehensive oral health services, including diagnostics, extractions, and restorative dentistry.</p>
                </div>
            </div>
        </section>

        <section class="max-w-6xl mx-auto py-12 px-6 mb-20">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="glass p-8">
                    <h3 id="heading-lab" class="text-xl font-bold uppercase gold-accent mb-4">Laboratory & Pharmacy</h3>
                    <p class="text-xs text-zinc-300">Equipped with modern diagnostic tools for fast and accurate medical testing and a fully stocked 24-hour pharmacy.</p>
                </div>
                <div class="glass p-8">
                    <h3 id="heading-payments" class="text-xl font-bold uppercase gold-accent mb-4">Accepted Payments</h3>
                    <p class="text-xs text-zinc-300">Credit/Debit Cards, M-Pesa, NFC Mobile Payments, and leading Health Insurances.</p>
                </div>
            </div>
        </section>
    </div>

    <div id="page-reviews" class="hidden max-w-4xl mx-auto py-12 md:py-24 px-6">
        <h2 id="heading-reviews" class="text-3xl font-bold uppercase mb-4 italic">Verified Reviews</h2>
        <p class="text-[10px] text-zinc-500 mb-12 uppercase">Rating: 4.4/5 Stars (Tassia Community Feed)</p>
        
        <div id="review-input-zone" class="mb-16 glass p-8 md:p-12 hidden">
            <h4 class="text-[10px] font-bold uppercase mb-4 tracking-widest medical-blue">Rate Your Visit</h4>
            <div class="star-rating mb-6">
                <input type="radio" id="star5" name="rating" value="5"/><label for="star5">★</label>
                <input type="radio" id="star4" name="rating" value="4"/><label for="star4">★</label>
                <input type="radio" id="star3" name="rating" value="3"/><label for="star3">★</label>
                <input type="radio" id="star2" name="rating" value="2"/><label for="star2">★</label>
                <input type="radio" id="star1" name="rating" value="1"/><label for="star1">★</label>
            </div>
            <textarea id="rev-text" placeholder="Tell us about your recovery..." class="w-full h-32 mb-6 text-sm"></textarea>
            <button onclick="saveReview()" class="w-full md:w-auto bg-sky-600 px-10 py-3 font-bold uppercase text-[10px]">Submit</button>
        </div>

        <div id="login-to-post" class="mb-16 glass p-12 text-center border-dashed">
            <p class="text-[9px] uppercase tracking-[0.3em] text-zinc-500">Sign in to leave a review</p>
        </div>

        <div id="review-list" class="space-y-8">
            </div>
    </div>

    <div id="page-portal" class="hidden max-w-md mx-auto py-12 md:py-24 px-6">
        <div id="auth-container" class="glass p-8 md:p-12 text-center shadow-2xl">
            <h3 id="heading-login" class="text-2xl font-bold mb-8 uppercase italic">Secure Portal</h3>
            <input id="auth-email" type="email" placeholder="EMAIL" class="mb-6 text-sm">
            <input id="auth-pass" type="password" placeholder="PASSWORD" class="mb-10 text-sm">
            <button id="auth-btn" onclick="handleAuth()" class="w-full bg-sky-700 text-white py-4 font-bold uppercase text-[10px]">Authorize</button>
            <p class="text-[9px] mt-4"><a href="#" onclick="toggleAuthMode()" id="toggle-link" class="gold-accent underline">New Patient? Sign Up</a></p>
        </div>
        <div id="user-dashboard" class="hidden text-center p-12 glass">
            <h3 class="text-xl font-bold mb-4">Patient Profile</h3>
            <p id="user-email-display" class="text-xs mb-8 text-sky-300 italic"></p>
            <button onclick="handleLogout()" class="border border-sky-500 px-8 py-2 uppercase text-[10px] font-bold">Sign Out</button>
        </div>
    </div>

    <footer class="bg-black/90 p-12 md:p-20 text-[9px] mt-auto font-bold uppercase tracking-[0.4em] border-t border-white/5">
        <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-12">
            <div>
                <h4 id="heading-privacy" class="text-white mb-4 underline">Data Privacy</h4>
                <p class="normal-case font-light leading-relaxed text-zinc-500">Health records are confidential. Portal access is encrypted. compliant with Kenya Data Protection Act 2019.</p>
            </div>
            <div class="md:text-right">
                <p>Fedha Road, Tassia, Nairobi</p>
                <p class="gold-accent mt-2">Tel: 0721 800701</p>
                <p class="mt-12 text-zinc-800">© 2025 Rheemah Hospital • Peak Business Solutions</p>
            </div>
        </div>
    </footer>

    <script>
        const SUPABASE_URL = 'https://omekzoprrhdrrqahekma.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_fs6rz6eyYkkg8N7AUi7IKg_On2b01mK';
        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        let isSignUpMode = false;
        function toggleAuthMode() {
            isSignUpMode = !isSignUpMode;
            document.getElementById('auth-title').innerText = isSignUpMode ? "Register" : "Secure Portal";
        }

        async function handleAuth() {
            const email = document.getElementById('auth-email').value;
            const password = document.getElementById('auth-pass').value;
            if (isSignUpMode) await supabaseClient.auth.signUp({ email, password });
            else await supabaseClient.auth.signInWithPassword({ email, password });
            checkUser();
        }

        async function checkUser() {
            const { data: { user } } = await supabaseClient.auth.getUser();
            document.getElementById('auth-container').classList.toggle('hidden', !!user);
            document.getElementById('user-dashboard').classList.toggle('hidden', !user);
            document.getElementById('review-input-zone').classList.toggle('hidden', !user);
            document.getElementById('login-to-post').classList.toggle('hidden', !!user);
            if(user) document.getElementById('user-email-display').innerText = user.email;
        }

        async function searchPage() {
            const query = document.getElementById('mainSearch').value.toLowerCase();
            if (query.includes('mater')) window.location.hash = 'heading-maternity';
            else if (query.includes('surg')) window.location.hash = 'heading-surgery';
            else if (query.includes('dent')) window.location.hash = 'heading-dental';
            else if (query.includes('lab')) window.location.hash = 'heading-lab';
            else if (query.includes('pay')) window.location.hash = 'heading-payments';
            else if (query.includes('login')) showPage('portal');
        }

        async function saveReview() {
            const text = document.getElementById('rev-text').value;
            const rating = document.querySelector('input[name="rating"]:checked')?.value || 5;
            const { data: { user } } = await supabaseClient.auth.getUser();
            await supabaseClient.from('reviews').insert([{ 
                name: user.email.split('@')[0], comment: text, rating: parseInt(rating)
            }]);
            document.getElementById('rev-text').value = '';
            loadReviews();
        }

        async function loadReviews() {
            const list = document.getElementById('review-list');
            const { data } = await supabaseClient.from('reviews').select('*').order('created_at', { ascending: false });
            if(data) {
                list.innerHTML = data.map(r => `
                    <div class="glass p-8 border-l-2 border-sky-500">
                        <div class="flex justify-between mb-4">
                            <p class="font-bold gold-accent uppercase text-[9px]">${r.name}</p>
                            <div class="text-[#D4AF37] text-xs">${"★".repeat(r.rating || 5)}${"☆".repeat(5 - (r.rating || 5))}</div>
                        </div>
                        <p class="italic text-lg text-zinc-100 font-light">"${r.comment}"</p>
                    </div>`).join('');
            }
        }

        function showPage(pId) {
            ['main', 'reviews', 'portal'].forEach(p => document.getElementById('page-' + p).classList.add('hidden'));
            document.getElementById('page-' + pId).classList.remove('hidden');
            if(pId === 'reviews') loadReviews();
            window.scrollTo(0,0);
        }
        checkUser();
    </script>
</body>
</html>
